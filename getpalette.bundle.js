var demo;(()=>{"use strict";var t={d:(r,e)=>{for(var s in e)t.o(e,s)&&!t.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:e[s]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{getPalette:()=>h});const e={hsl2rgb(t,r,e){const s=t>=0&&t<=360,n=r>=0&&r<=1,a=e>=0&&e<=1;if(!s||!n||!a)throw new Error(`hsl2rgb: h:${t} s:${r} l:${e} ch:${s} cs:${n} cl:${a}`);const i={r:0,g:0,b:0},h=(1-(2*e-1))*r,o=t/60,u=1*h-(o%2-1);o>=0&&o<1&&(i.r=h,i.g=u,i.b=0),o>=1&&o<2&&(i.r=u,i.g=h,i.b=0),o>=2&&o<3&&(i.r=0,i.g=h,i.b=u),o>=3&&o<4&&(i.r=0,i.g=u,i.b=h),o>=4&&o<5&&(i.r=u,i.g=0,i.b=h),o>=5&&o<6&&(i.r=h,i.g=0,i.b=u);const l=e-h/2;return i.r=Math.floor(100*(i.r+l)),i.g=Math.floor(100*(i.g+l)),i.b=Math.floor(100*(i.b+l)),i},hsv2rgb(t,r,e){let s=t/360;const n=r/100;let a,i,h=e/100,o=0,u=0,l=0,g=0;if(0===n)o=u=l=Math.round(255*h);else switch(s>=1&&(s=0),s*=6,i=s-Math.floor(s),g=Math.round(255*h*(1-n)),l=Math.round(255*h*(1-n*i)),a=Math.round(255*h*(1-n*(1-i))),h=Math.round(255*h),Math.floor(s)){case 0:o=h,u=a,l=g;break;case 1:o=l,u=h,l=g;break;case 2:o=g,u=h,l=a;break;case 3:o=g,u=l,l=h;break;case 4:o=a,u=g,l=h;break;case 5:o=h,u=g}return{r:o||0,g:u||0,b:l||0}},rgb2hsv(t,r,e){let s=0,n=0,a=0;if(null==t||null==r||null==e||isNaN(t)||isNaN(r)||isNaN(e))throw new Error("Please enter numeric RGB values!");if(t<0||r<0||e<0||t>255||r>255||e>255)throw new Error("RGB values must be in the range 0 to 255.");t/=255,r/=255,e/=255;const i=Math.min(t,Math.min(r,e)),h=Math.max(t,Math.max(r,e));return i===h?(a=i,{h:0,s:0,v:a}):(s=60*((t===i?3:e===i?1:5)-(t===i?r-e:e===i?t-r:e-t)/(h-i)),n=(h-i)/h,a=h,{h:s,s:n,v:a})},hsl2hsv(t,r,e){const s={h:t,s:0,v:0};return s.v=e+r*Math.min(e,1-e),s.s=0===s.v?0:2*(1-e/s.v),s},hex2rgb(t){if("#"!==t.charAt(0))throw new Error("hex must start with # character");if(4===t.length)return{r:parseInt(t.substring(1,2)+t.substring(1,2),16),g:parseInt(t.substring(2,3)+t.substring(2,3),16),b:parseInt(t.substring(3,4)+t.substring(3,4),16)};if(7===t.length)return{r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16)};throw new Error("hex length is invalid")}};class s{_r=0;_g=0;_b=0;_a=1;constructor(...t){if(t&&t.length){if("string"==typeof t[0]){const{r,g:s,b:n}=e.hex2rgb(t[0]);return this.r=r,this.g=s,void(this.b=n)}if("number"==typeof t[0]&&"number"==typeof t[1]&&"number"==typeof t[2])return this.r=t[0],this.g=t[1],this.b=t[2],void(this.a="number"==typeof t[3]?t[3]:1);if(t[0]instanceof n){const{r,g:s,b:n}=e.hsv2rgb(t[0].h,t[0].s,t[0].v);return this.r=r,this.g=s,void(this.b=n)}if(t[0]instanceof class{h;s;l;a;constructor(t,r,e,s){this.h=t,this.s=r,this.l=e,this.a=void 0===s?1:s}}){const{r,g:s,b:n}=e.hsl2rgb(t[0].h,t[0].s,t[0].l);return this.r=r,this.g=s,void(this.b=n)}throw new Error("Has been not found suitable signature")}}get r(){return this._r}set r(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>255)throw new Error("value is unsupported");this._r=t}get g(){return this._g}set g(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>255)throw new Error("value is unsupported");this._g=t}get b(){return this._b}set b(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>255)throw new Error("value is unsupported");this._b=t}get a(){return this._a}set a(t){if(void 0===t)throw new Error("value is undefined");if(t<0||t>1)throw new Error("value is unsupported");this._a=t}toString(){let t=this.r.toString(16);t=1===t.length?"0"+t:t;let r=this.g.toString(16);r=1===r.length?"0"+r:r;let e=this.b.toString(16);return e=1===e.length?"0"+e:e,1===this.a?`#${t}${r}${e}`:`rgba(${t},${r},${e},${this.a})`}toHSV(){const{h:t,s:r,v:s}=e.rgb2hsv(this.r,this.g,this.b);return new n(Math.floor(Math.round(t)),Math.floor(100*r),Math.floor(100*s))}static black=new s("#000000");static white=new s("#ffffff");static red=new s("#ff0000");static green=new s("#00ff00");static blue=new s("#0000ff")}class n{h;s;v;a;constructor(t,r,e,s){this.h=t,this.s=r,this.v=e,this.a=void 0===s?1:s}}class a{x;y;constructor(...t){this.x=0,this.y=0,1===t.length&&(this.x=t[0].x,this.y=t[0].y),2===t.length&&(this.x=t[0],this.y=t[1])}add(t){return new a(this.x+t.x,this.y+t.y)}dec(t){return new a(this.x-t.x,this.y-t.y)}static sum(t,r){return new a(t.x+r.x,t.y+r.y)}static mul(t,r){return new a(t.x*r.x,t.y*r.y)}}const i={};function h(t,r,e){const n=r.getContext("2d");if(!n)return;r.width=t.naturalWidth,r.height=t.naturalHeight,console.log("drawImage"),n.drawImage(t,0,0,r.width,r.height,0,0,t.naturalWidth,t.naturalHeight),console.log("drawImage got"),console.log("getImageData");const a=n.getImageData(0,0,t.naturalWidth,t.naturalHeight),i=n.createImageData(t.naturalWidth,t.naturalHeight);console.log("getImageData got");const h=[],l=[],g=a.data.length;for(let t=0;t<g;t+=4){const r=a.data[t],n=a.data[t+1],o=a.data[t+2],g=a.data[t+3],c=Math.floor(r/e),d=Math.floor(n/e),p=Math.floor(o/e),w=l.findIndex((t=>t.equals(c,d,p,g)));i.data[t]=h[w]?h[w].r:r,i.data[t+1]=h[w]?h[w].g:n,i.data[t+2]=h[w]?h[w].b:o,i.data[t+3]=g,w>-1||(l.push(new u(c,d,p,0)),h.push(new s(r,n,o,1)))}const c=document.createElement("canvas");c.width=r.width,c.height=r.height,c.getContext("2d")?.putImageData(i,0,0);const d=c.toDataURL();return{list:h.sort(((t,r)=>o(t)-o(r))),image:d}}i.Arc=(t,r,e)=>{if("Arc"!==r.type)return;const s=e.applyMatrix(new a(r));t.push(s),t.push(new a(s.x,s.y+r.radius)),t.push(new a(s.x,s.y+-r.radius)),t.push(new a(s.y,s.y+r.radius)),t.push(new a(s.x,s.y+-r.radius))},i.ArcTo=(t,r,e)=>{if("ArcTo"!==r.type)return;const s=e.applyMatrix(new a(r.x1,r.y1)),n=e.applyMatrix(new a(r.x2,r.y2));t.push(s),t.push(n),t.push(new a(s.x,s.y+r.radius)),t.push(new a(s.x,s.y+-r.radius)),t.push(new a(s.y,s.y+r.radius)),t.push(new a(s.x,s.y+-r.radius))},i.BezierCurveTo=(t,r,e)=>{if("BezierCurveTo"!==r.type)return;const s=e.applyMatrix(new a(r));t.push(s)},i.ClosePath=()=>{},i.Ellipse=(t,r,e)=>{if("Ellipse"!==r.type)return;const s=e.applyMatrix(new a(r));t.push(s),t.push(new a(s.x,r.radiusX)),t.push(new a(s.x,-r.radiusX)),t.push(new a(s.y,r.radiusY)),t.push(new a(s.x,-r.radiusY))},i.LineTo=(t,r,e)=>{if("LineTo"!==r.type)return;const s=e.applyMatrix(new a(r));t.push(s)},i.MoveTo=(t,r,e)=>{if("MoveTo"!==r.type)return;const s=e.applyMatrix(new a(r));t.push(s)},i.QuadraticCurveTo=(t,r,e)=>{if("QuadraticCurveTo"!==r.type)return;const s=e.applyMatrix(new a(r));t.push(s),t.push(new a(s.x,r.cpx)),t.push(new a(s.y,r.cpy))},i.Rect=(t,r,e)=>{if("Rect"!==r.type)return;const s=e.applyMatrix(new a(r));t.push(s),t.push(new a(s.x+r.w,s.y+r.h))};const o=({r:t,g:r,b:e})=>{let s=t;return s=(s<<8)+r,s=(s<<8)+e,s};class u{r;g;b;a;constructor(t,r,e,s){this.r=t,this.g=r,this.b=e,this.a=s}equals(t,r,e,s){return this.r===t&&this.g===r&&this.b===e}}demo=r})();
